# 2024-NC2-A48-SharePlay
## ğŸ¥ Youtube Link
(ì¶”í›„ ë§Œë“¤ì–´ì§„ ìœ íŠœë¸Œ ë§í¬ ì¶”ê°€)

## ğŸ’¡ About SharePlay
SharePlayëŠ” FaceTime í†µí™” ì¤‘ì— ì°¸ì—¬í•˜ëŠ” ëª¨ë“  ê¸°ê¸°ì—ì„œ **ì•± ì¬ìƒì„** **ë™ê¸°í™”**í•˜ì—¬ ëª¨ë“  ì‚¬ëŒì´ **ë™ì‹œì— ê²½í—˜**ì„ ì¦ê¸¸ ìˆ˜ ìˆëŠ” ì›í™œí•œ ë¯¸ë””ì–´ ë° ì½˜í…ì¸  ê³µìœ ë¥¼ ë„ì™€ì¤ë‹ˆë‹¤. 
Apple Music, Apple TV, Apple Fitness+ì™€ ê°™ì€ ë‹¤ì–‘í•œ Apple ì•±ì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆê³ , SharePlay APIë¥¼ í†µí•´ ê°œë°œìë“¤ì´ ìì‹ ì˜ ì•±ì— SharePlay ê¸°ëŠ¥ì„ í†µí•©í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ê³  ìˆìŠµë‹ˆë‹¤.

ëŒ€í‘œì ì¸ ì˜ˆì‹œë¡œëŠ” FaceTime í†µí™”í•˜ë©´ì„œ ì˜í™” ë³´ê¸°, ìŒì•… ë“£ê¸°, ë˜ëŠ” í™”ì´íŠ¸ë³´ë“œì—ì„œ ì•„ì´ë””ì–´ ìŠ¤ì¼€ì¹˜ì™€ ê°™ì€ í™œë™ì„ ê³µìœ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![[í•¨ê»˜ ë³´ê¸°] ì˜í™”ì™€ TV í”„ë¡œê·¸ë¨ì„ ë™ê¸°í™”í•´ ìŠ¤íŠ¸ë¦¬ë°í•˜ë©´ì„œ FaceTimeìœ¼ë¡œ ì†Œí†µ](https://github.com/DeveloperAcademy-POSTECH/2024-NC2-A48-SharePlay/assets/144869234/d525acc9-e9de-4c74-abcb-8c7de4e70f53 "[í•¨ê»˜ ë³´ê¸°] ì˜í™”ì™€ TV í”„ë¡œê·¸ë¨ì„ ë™ê¸°í™”í•´ ìŠ¤íŠ¸ë¦¬ë°í•˜ë©´ì„œ FaceTimeìœ¼ë¡œ ì†Œí†µ")
![[í•¨ê»˜ ìš´ë™í•˜ê¸°] Apple Fitness+ë¥¼ í†µí•´ í•¨ê»˜ ìš´ë™í•˜ê±°ë‚˜ ëª…ìƒ](https://github.com/DeveloperAcademy-POSTECH/2024-NC2-A48-SharePlay/assets/144869234/52629ec1-e8c9-4cf1-bfab-f4cc9b18f969 "[í•¨ê»˜ ìš´ë™í•˜ê¸°] Apple Fitness+ë¥¼ í†µí•´ í•¨ê»˜ ìš´ë™í•˜ê±°ë‚˜ ëª…ìƒ")
![[í•¨ê»˜ ë“£ê¸°] FaceTime í†µí™”ì— ìŒì•…, ì•¨ë²”, í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ë¥¼ ê³§ë°”ë¡œ ë¶ˆëŸ¬ì™€ ìŒì•… ê°ìƒ ê²½í—˜ì„ ê³µìœ ](https://github.com/DeveloperAcademy-POSTECH/2024-NC2-A48-SharePlay/assets/144869234/587d05c5-117b-4749-a9bc-ffbf1b9698b0 "[í•¨ê»˜ ë“£ê¸°] FaceTime í†µí™”ì— ìŒì•…, ì•¨ë²”, í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ë¥¼ ê³§ë°”ë¡œ ë¶ˆëŸ¬ì™€ ìŒì•… ê°ìƒ ê²½í—˜ì„ ê³µìœ ")

[SharePlay HIG ë°”ë¡œê°€ê¸°](https://developer.apple.com/kr/design/human-interface-guidelines/shareplay/)

### What is GroupActivities?
Group ActivitiesëŠ” SharePlayë¥¼ í†µí•´ ì—¬ëŸ¬ ì°¸ì—¬ìê°€ í•¨ê»˜ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì½˜í…ì¸ ì™€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í˜‘ì—… í™˜ê²½ì„ ì œê³µí•˜ëŠ” í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤. ì•±ì— Group Activities í”„ë ˆì„ì›Œí¬ë¥¼ ì¶”ê°€í•˜ë©´ FaceTime, Messages, AirDropì„ í†µí•´ ì•±ì˜ ê¸°ëŠ¥ì„ ê³µìœ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 

[GroupActivities Developer Doc ë°”ë¡œê°€ê¸°](https://developer.apple.com/documentation/groupactivities/defining-your-apps-shareplay-activities)

## ğŸ¯ What we focus on
SharePlayëŠ” ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ì œê³µí•˜ê¸°ë³´ë‹¤ëŠ” í•˜ë‚˜ì˜ ê¸°ìˆ ë¡œì„œ ë§¤ìš° ëª…í™•í•˜ê³  íŠ¹ì •í•œ ëª©ì ì„ ê°€ì§€ê³  ìˆìœ¼ë©°, **ì‹¤ì‹œê°„ ìƒí˜¸ì‘ìš©**ê³¼ **ë¯¸ë””ì–´ ê°ìƒ**ì— ì¤‘ì ì„ ë‘” ê¸°ìˆ ì…ë‹ˆë‹¤.

í™”ë©´ ë¯¸ëŸ¬ë§ì´ ë‹¨ìˆœíˆ í™”ë©´ì„ ê³µìœ í•˜ëŠ” ê²ƒì´ë¼ë©´, **SharePlay**ëŠ” í•œ ë‹¨ê³„ ë” ë‚˜ì•„ê°€ **ì‹¤ì‹œê°„ìœ¼ë¡œ ì½˜í…ì¸ ë¥¼ ì œì–´í•˜ê³  ë™ê¸°í™”í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µ**í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ëª¨ë“  ì°¸ê°€ìê°€ ë™ì‹œì— ì½˜í…ì¸ ë¥¼ ì¬ìƒí•˜ê³ , ì¼ì‹œ ì •ì§€í•˜ë©°, ë˜ê°ê¸° ë“±ì˜ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆì–´ ê°ìì˜ ë””ë°”ì´ìŠ¤ì—ì„œ ë™ì¼í•œ ê²½í—˜ì„ ì¦ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> ì²˜ìŒì—ëŠ” SharePlayì˜ ê¸°ëŠ¥ì„ ì„œë¡œì˜ í™”ë©´ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ê³µìœ í•˜ëŠ” ê²ƒì´ë¼ê³  ì´í•´í•˜ê³ , UseCaseë¥¼ ì„œë¡œì˜ í™”ë©´ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ê³µìœ í•˜ê³  ë³¼ ìˆ˜ ìˆëŠ” â€˜ëª¨ê°ê³µâ€™ì„ ë– ì˜¬ë ¸ìŠµë‹ˆë‹¤.
ê·¸ëŸ¬ë‚˜ SharePlayì— ëŒ€í•´ ë” ê¹Šì´ ì¡°ì‚¬í•œ ê²°ê³¼, ì‹¤ì‹œê°„ í™”ë©´ ê³µìœ ë¥¼ ë„˜ì–´ ë¯¸ë””ì–´ë‚˜ ìŒì•… ë“±ì˜ ì½˜í…ì¸ ë¥¼ ì œì–´í•˜ê³ , ì´ë¥¼ ì„œë¡œì˜ í™”ë©´ì— ë™ê¸°í™”í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤ëŠ” ê²ƒì„ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì €í¬ëŠ” â€˜ì‹¤ì‹œê°„ ìƒí˜¸ì‘ìš©â€™ê³¼ â€˜ë™ê¸°í™”â€™ì— ì§‘ì¤‘í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

## ğŸ’¼ Use Case
**ğŸ’¡ SharePlayë¥¼ í™œìš©í•œ ì‹¤ì‹œê°„ ìˆ˜í•™ ë¬¸ì œ í’€ì´ ê³µìœ  ìº”ë²„ìŠ¤**
> ***PencilKit***ì„ ì´ìš©í•´ ìˆ˜í•™ ë¬¸ì œë¥¼ í’€ ìˆ˜ ìˆëŠ” ìº”ë²„ìŠ¤ë¥¼ ê°œë°œí•˜ê³ , ***SharePlay***ë¥¼ í™œìš©í•˜ì—¬ ì‚¬ìš©ìë“¤ì´ ì‹¤ì‹œê°„ìœ¼ë¡œ ìº”ë²„ìŠ¤ì— ë¬¸ì œ í’€ì´ë¥¼ ì‘ì„±í•˜ê³ , ê³µìœ í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.

## ğŸ–¼ï¸ Prototype
(í”„ë¡œí† íƒ€ì…ê³¼ ì„¤ëª… ì¶”ê°€)

## ğŸ› ï¸ About Code
```Swift
// SharePlayë¥¼ êµ¬ì„±í•˜ê³ , ì»¤ìŠ¤í…€ SharePlayë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì„¤ì •ì…ë‹ˆë‹¤.
// GroupActivity í”„ë¡œí† ì½œì€ metadataì™€ activityIdentifier(default ê°’)ë¥¼ í•„ìˆ˜ì ìœ¼ë¡œ ê°€ì ¸ì•¼ í•œë‹¤.
struct SharePlay: GroupActivity {
    var metadata: GroupActivityMetadata {
        var metadata = GroupActivityMetadata()
        metadata.title = NSLocalizedString("I am your solving mate!", comment: "Let's solve together!")
        metadata.type = .generic
        return metadata
    }
}
```
```Swift
// SharePlay ì‹œì‘ ì§€ì 
func startSharing() {
    Task {
        do {
            _ = try await SharePlay().activate()
        } catch {
            print("Failed to activate SharePlay activity: \(error)")
        }
    }
}
```
```Swift
// GroupSessionì„ ë°›ê¸° ìœ„í•œ async task
HStack { 
	Text("Hello World!")
}
.task {
    for await session in SharePlay.sessions() {
        canvas.configureGroupSession(session)
    }
}
```
```Swift
// GroupSessionì„ ìƒì„±í•˜ê³  êµ¬ì„±í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.
func configureGroupSession(_ groupSession: GroupSession<SharePlay>) {
    self.groupSession = groupSession
    let messenger = GroupSessionMessenger(session: groupSession)
    self.messenger = messenger
    
    // sessionì˜ ìƒíƒœê°€ ìœ íš¨í•˜ì§€ ì•Šì„ ë•Œ ì‹¤í–‰ë©ë‹ˆë‹¤.
    groupSession.$state
    .sink { [weak self] state in
        if case .invalidated = state {
            self?.groupSession = nil
            self?.reset()
        }
     }
     .store(in: &subscriptions)
        
     let task = Task {
        await self.receiveDrawingData()
     }
}

// ì‘ì€ í¬ê¸°ì˜ ë°ì´í„°ë¥¼ ë³´ë‚¼ ë•Œ messengerë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
func sendDrawingData(_ drawingData: Data) {
    guard let messenger = messenger else { return }
    messenger.send(drawingData) { error in
       if let error = error {
           print("Error sending drawing data: \(error)")
        }
     }
}
    
// ë³€í™”ëœ ë°ì´í„°ë¥¼ ë°›ì•„ì˜µë‹ˆë‹¤.
private func receiveDrawingData() async {
    guard let messenger = messenger else { return }
    for try await (drawingData, _) in messenger.messages(of: Data.self) {
        self.receivedDrawingData = drawingData
    }
}
```
